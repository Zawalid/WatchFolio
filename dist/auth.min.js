"use strict";import{showMessage as o,isValidPassword as i,showPassword as e}from"/utilities.min.js";e();import{auth as l,createUserWithEmailAndPassword as n,signInWithEmailAndPassword as c,signInWithPopup as t,GoogleAuthProvider as a,updateProfile as d,sendPasswordResetEmail as r,getSignInErrorMessage as u,getSignUpErrorMessage as p}from"/firebaseApp.min.js";const s=document.getElementById("container"),m=document.getElementById("tabs"),x=s.innerHTML,g=`
  <h1 class="mb-9 text-3xl font-bold text-white max-md:text-center">
    Sign Up & Begin Your
    <span class="text-primaryAccent">TV Show</span> Journey: Track and
    Curate with Ease
  </h1>

  <form id="signUp_form">
  <div class="flex gap-5 mb-5">
  <input
      class="w-full rounded-xl border border-nobleDark500 bg-nobleDark600 p-3 text-white placeholder:text-textColor2 focus:outline-none"
      type="text"
      name="first_name"
      placeholder="First Name"
    />
  <input
      class="w-full rounded-xl border border-nobleDark500 bg-nobleDark600 p-3 text-white placeholder:text-textColor2 focus:outline-none"
      type="text"
      name="last_name"
      placeholder="Last Name"
    />
    </div>
    <input
      class="w-full rounded-xl border border-nobleDark500 bg-nobleDark600 p-3 text-white placeholder:text-textColor2 focus:outline-none"
      type="text"
      name="email"
      placeholder="Email"
    />
    <div class="relative">
            <input
              class="password_input peer mt-5 relative z-[20] w-full rounded-xl border border-nobleDark500 bg-nobleDark600 p-3 text-white placeholder:text-textColor2 focus:outline-none"
              type="password"
              name="password"
              placeholder="Password"
            />
            <i
              class="fa-solid fa-eye eye-icon  absolute right-3 top-1/2  z-30 cursor-pointer text-sm text-textColor2"
              id="show_password"
            ></i>
            <div class="absolute w-full sm:w-[325px]  rounded-xl shadow-shadow-1 bg-white p-5 -top-[210px] transition-opacity duration-500 opacity-0 -z-10 peer-focus:opacity-100 peer-focus:z-10" id="password_validation">
            <h3 class="font-bold text-grey-700">Password requirements</h3>
            <ul class="mt-3">
              <li class="text-sm mb-2  text-grey-500"><i id="chars_long_validation" class="fa-regular fa-circle-check mr-3 text-red-300"></i>Should be at least 8 characters</li>
              <li class="text-sm mb-2  text-grey-500"><i id="uppercase_validation" class="fa-regular fa-circle-check mr-3 text-red-300"></i>Contain at least one uppercase</li>
              <li class="text-sm mb-2  text-grey-500"><i id="lowercase_validation" class="fa-regular fa-circle-check mr-3 text-red-300"></i>Contain at least one lowercase</li>
              <li class="text-sm mb-2  text-grey-500"><i id="numbers_validation" class="fa-regular fa-circle-check mr-3 text-red-300"></i>Contain at least one digit</li>
              <li class="text-sm  text-grey-500"><i id="special_chars_validation" class="fa-regular fa-circle-check mr-3 text-red-300"></i>Contain at least one special character</li>
            </ul>
          </div>
          </div>
    <input
      type="submit"
      value="Sign Up"
      class="w-full cursor-pointer rounded-2xl bg-primaryAccent py-3 mt-9 text-lg font-bold text-black transition hover:bg-opacity-80"
    />
  </form>

  <div class="my-8 flex items-center justify-center gap-4">
    <span class="h-[1px] w-full flex-1 bg-textColor2"></span>
    <span class="text-textColor2">or continue with</span>
    <span class="h-[1px] w-full flex-1 bg-textColor2"></span>
  </div>
  <button
    class="flex w-full cursor-pointer items-center justify-center gap-3 rounded-xl bg-white py-3 font-bold text-black"
    id="google_signup"
  >
    <img src="imgs/Google Logo.svg" alt="" />
    <span class="font-semibold">Google Account</span>
  </button>
`,f=e=>{s.innerHTML=`<i
    class="fa-solid fa-spinner absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 animate-spin text-4xl text-thirdAccent"
    ></i>`,setTimeout(()=>{s.innerHTML=e},1e3)},h=e=>{[...m.children].forEach(e=>{e.classList.remove("active")}),e.classList.add("active")},b=(m.addEventListener("click",e=>{"signIn"===e.target.id&&(e.target.classList.contains("active")||f(x),document.title="WatchFolio - Sign In",h(e.target)),"signUp"===e.target.id&&(e.target.classList.contains("active")||f(g),document.title="WatchFolio - Sign Up",h(e.target),setTimeout(()=>{i()},1100))}),document.addEventListener("submit",e=>{if(e.preventDefault(),"signIn_form"===e.target.id){var t=e.target[0].value,a=e.target[1].value;""===t||""===a?o("Please enter your email and password.","error"):c(l,t,a).then(()=>window.location.href="/").catch(e=>o(u(e.code),"error"))}else if("signUp_form"===e.target.id){const r=e.target[0].value,s=e.target[1].value;t=e.target[2].value,a=e.target[3].value;""===t||""===a||""===r||""===s?o("Please fill in all the fields.","error"):i()?n(l,t,a).then(e=>{const t=e.user;d(t,{displayName:r+" "+s}).catch(e=>o(p(e.code),"error")),m.children[0].click(),setTimeout(()=>{document.querySelector("input").focus(),document.querySelector("input").value=t.email},1100)}).catch(e=>o(p(e.code),"error")):o("Password is too weak. Please choose a stronger password.","error")}}),document.addEventListener("click",e=>{e.target.closest("#google_signup")&&(e=new a,t(l,e).then(()=>window.location.href="/").catch(e=>o(u(e.code),"error")))}),document.getElementById("forgot_password_container")),w=b.firstElementChild.innerHTML;document.addEventListener("click",e=>{"forgot_password"===e.target.id&&(b.firstElementChild.innerHTML=w,b.classList.add("show"),b.querySelector("input").focus())}),b.addEventListener("click",function(e){!e.target.closest("#close")&&e.target!==e.currentTarget||this.classList.remove("show")}),document.addEventListener("submit",e=>{if(e.preventDefault(),"forgot_password_form"==e.target.id){const t=e.target.children[1].value;""===t?o("Please enter your email address.","error"):r(l,t).then(()=>{b.firstElementChild.innerHTML=`
          <i
          class="fa-solid fa-paper-plane mx-auto animate-fadeIn text-4xl text-thirdAccent"
        ></i>
          `,setTimeout(()=>{b.firstElementChild.innerHTML=`
          <div class="mt-auto text-center">
          <i
            class="fa-solid fa-envelope-circle-check text-[60px] text-textColor max-sm:text-[100px]"
          ></i>
          <h1 class="mt-5 text-3xl font-bold text-white max-sm:mt-8">
            Check Your Inbox
          </h1>
          <p class="mb-8 mt-5 font-semibold text-textColor2">
            We've sent you an email with instructions on how to reset your
            password.
          </p>
          <div class="flex flex-col items-center gap-5">
            <a
              href="mailto:${t}"
              target="_blank"
              class="w-32 cursor-pointer rounded-2xl bg-secondaryAccent py-2 text-center font-bold text-textColor transition hover:bg-thirdAccent"
            >
              Open Inbox
            </a>
            <button
              class="cursor-pointer font-bold text-textColor transition hover:text-textColor2"
              id="close"
            >
              Skip, I'll check later
            </button>
          </div>
        </div>
        <p
          class="mt-12 text-center font-semibold text-textColor2 max-sm:mt-auto"
        >
          Didn't receive the email? Check your spam folder or
          <span
            class="cursor-pointer font-bold text-primaryAccent"
            id="try_again"
            >try again</span
          >
        </p>
        `},1500)}).catch(e=>o(u(e.code),"error"))}}),document.addEventListener("click",e=>{"try_again"===e.target.id&&(b.firstElementChild.innerHTML=w)});